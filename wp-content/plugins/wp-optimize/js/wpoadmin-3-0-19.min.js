jQuery(document).ready(function(t){WP_Optimize=WP_Optimize(),"undefined"!=typeof WP_Optimize_Cache&&(WP_Optimize_Cache=WP_Optimize_Cache()),"undefined"!=typeof wp_optimize.minify&&(WP_Optimize_Minify=wp_optimize.minify.init())});var WP_Optimize=function(){function t(){if(C("#enable-schedule").length){var t=C("#enable-schedule").is(":checked");t?C("#wp-optimize-auto-options").css("opacity","1"):C("#wp-optimize-auto-options").css("opacity","0.5")}}function i(t,i,e){i="undefined"==typeof i?"#wp-optimize-wrap":i,e="undefined"==typeof e?15:e,C(t).hide().prependTo(i).slideDown("fast").delay(1e3*e).slideUp("fast",function(){C(this).remove()})}function e(t,e){var o={type:t,enable:e?1:0};C("#"+t+"_spinner").show(),q("enable_or_disable_feature",o,function(e){if(C("#"+t+"_spinner").hide(),e&&e.hasOwnProperty("output"))for(var o=0,n=e.output.length;o<n;o++){var a='<div class="updated"><p>'+e.output[o]+"</p></div>";i(a,"#"+t+"_notice")}})}function o(t){t?C("#wp-optimize-wrap").addClass("wpo-mobile-menu-opened"):C("#wp-optimize-wrap").removeClass("wpo-mobile-menu-opened")}function n(){if(!A){var t=C(".wpo-page[data-whichpage=WP-Optimize]"),i=t.find(".wpo_shade");i.removeClass("hidden"),q("get_database_tabs",{},function(i){A=!0,i.hasOwnProperty("optimizations")&&t.find(".wp-optimize-optimizations-table-placeholder").replaceWith(i.optimizations),h(i),C(document).trigger("wpo_database_tabs_loaded")}).always(function(){i.addClass("hidden")})}}function a(t){var i="",t="undefined"==typeof t?"string":t,e=C("#wp-optimize-database-settings form input[name!='action'], #wp-optimize-database-settings form select, #wp-optimize-database-settings form textarea, #wp-optimize-general-settings form input[name!='action'], #wp-optimize-general-settings form textarea, #wp-optimize-general-settings form select, #wp-optimize-nav-tab-contents-optimize input[type='checkbox'], .wp-optimize-nav-tab-contents input[name^='enable-auto-backup-']");return"object"==t?i=e.serializeJSON({useIntKeysAsArrayIndex:!0}):(i=e.serialize(),C.each(C('#wp-optimize-database-settings form input[type=checkbox], #wp-optimize-general-settings form input[type=checkbox], .wp-optimize-nav-tab-contents input[name^="enable-auto-backup-"]').filter(function(t){return 0==C(this).prop("checked")}),function(t,e){var o="0";i+="&"+C(e).attr("name")+"="+o})),i}function s(){q("optimizations_done",{},function(){})}function p(){if(!D.get_lock())return void(W>0&&console.log("WP-Optimize: process_queue(): queue is currently locked - exiting"));W>0&&console.log("WP-Optimize: process_queue(): got queue lock");var t=D.peek();return"object"==typeof t?(data=t,t=t.optimization_id):data={},"undefined"==typeof t?(W>0&&console.log("WP-Optimize: process_queue(): queue is apparently empty - exiting"),D.unlock(),void s()):(W>0&&console.log("WP-Optimize: process_queue(): processing item: "+t),D.dequeue(),C(document).trigger(["do_optimization_",t,"_start"].join("")),void q("do_optimization",{optimization_id:t,data:data},function(i){if(C("#optimization_spinner_"+t).hide(),C("#optimization_checkbox_"+t).show(),C(".optimization_button_"+t).prop("disabled",!1),C(document).trigger(["do_optimization_",t,"_done"].join(""),i),i){for(var e="",o=0,n=i.errors.length;o<n;o++)e+='<span class="error">'+i.errors[o]+"</span><br>";for(var o=0,n=i.messages.length;o<n;o++)e+=i.errors[o]+"<br>";for(var o=0,n=i.result.output.length;o<n;o++)e+=i.result.output[o]+"<br>";if(C("#optimization_info_"+t).html(e),i.hasOwnProperty("status_box_contents")&&C("#wp_optimize_status_box").css("opacity","1").find(".inside").html(i.status_box_contents),i.hasOwnProperty("table_list")&&C("#wpoptimize_table_list tbody").html(C(i.table_list).find("tbody").html()),i.hasOwnProperty("total_size")&&C("#optimize_current_db_size").html(i.total_size),"optimizetables"==t&&data.optimization_table&&(D.is_empty()?(C("#optimization_spinner_"+t).hide(),C("#optimization_checkbox_"+t).show(),C(".optimization_button_"+t).prop("disabled",!1),C("#optimization_info_"+t).html(wpoptimize.optimization_complete)):(C("#optimization_checkbox_"+t).hide(),C("#optimization_spinner_"+t).show(),C(".optimization_button_"+t).prop("disabled",!0))),i.result.meta&&i.result.meta.hasOwnProperty("awaiting_mod")){var a=i.result.meta.awaiting_mod;a>0?C("#adminmenu .awaiting-mod .pending-count").remove(a):C("#adminmenu .awaiting-mod").remove()}}setTimeout(function(){D.unlock(),p()},10)}))}function r(t){var i=C("#wp-optimize-nav-tab-contents-optimize .wp-optimize-settings-"+t);i||console.log("do_optimization: row corresponding to this optimization ("+t+") not found");var e={},o=0;if(C('input[type="checkbox"]',C("#optimization_info_"+t)).each(function(){var t=C(this);t.is(":checked")&&(e[t.attr("name")]=t.val(),o++)}),1!=C(".optimization_button_"+t).prop("disabled")){if(C("#optimization_checkbox_"+t).hide(),C("#optimization_spinner_"+t).show(),C(".optimization_button_"+t).prop("disabled",!0),C("#optimization_info_"+t).html("..."),"optimizetables"==t){var n=C("#wpoptimize_table_list #the-list tr");C(n).each(function(i){var e=(C(this).find("td"),C(this).data("type")),o=C(this).data("tablename"),n=C(this).data("optimizable");if(""!=o&&(1==parseInt(n)||T)){var a={optimization_id:t,optimization_table:o,optimization_table_type:e,optimization_force:T};D.enqueue(a)}})}else if(o>0){data={optimization_id:t};for(var a in e)e.hasOwnProperty(a)&&(data[a]=e[a]);D.enqueue(data)}else D.enqueue(t);p()}}function l(t){C("#wpo_settings_sites_list").length?q("save_site_settings",{"wpo-sites":c()},function(){t&&t()}):t&&t()}function c(){var t=[];return C('#wpo_settings_sites_list input[type="checkbox"]').each(function(){var i=C(this);i.is(":checked")&&t.push(i.attr("value"))}),t}function _(){var t=!1;C("#enable-auto-backup").is(":checked")&&(t=!0),u(),1==t?d(w):w()}function d(t,i){"undefined"==typeof i&&(i="");var e=i?0:1;"function"==typeof updraft_backupnow_inpage_go?updraft_backupnow_inpage_go(function(){C("#updraft-backupnow-inpage-modal").dialog("close"),t&&t()},i,"autobackup",0,e,0,wpoptimize.automatic_backup_before_optimizations):t&&t()}function u(){var t=a("object");t.auto_backup=C("#enable-auto-backup").is(":checked"),q("save_auto_backup_option",t)}function m(t,i,e,o){t.on("click",function(){return i.hasClass("wpo_always_visible")||i.toggleClass("wpo_hidden"),!1}),f(e,o)}function f(t,i){t.on("change",function(){t.is(":checked")?i.prop("checked",!0):i.prop("checked",!1),g(t,i)}),i.on("change",function(){g(t,i)}),g(t,i)}function g(t,i){var e=0,o=0;if(i.each(function(){C(this).is(":checked")&&o++,e++}),t.next().is("label")&&t.next().data("label")){var n=t.next(),a=n.data("label");e==o?n.text(a):n.text(a.replace("all",[o," of ",e].join("")))}e==o?t.prop("checked",!0):t.prop("checked",!1)}function w(){$optimizations=C("#optimizations_list .optimization_checkbox:checked"),$optimizations.sort(function(t,i){return t=C(t).closest(".wp-optimize-settings").data("optimization_run_sort_order"),i=C(i).closest(".wp-optimize-settings").data("optimization_run_sort_order"),t>i?1:t<i?-1:0});var t={};$optimizations.each(function(i){var e=C(this).closest(".wp-optimize-settings").data("optimization_id");return e?(t[e]={active:1},void r(e)):void console.log("Optimization ID corresponding to pressed button not found")}),q("save_manual_run_optimization_options",t)}function h(t){if(t.hasOwnProperty("table_list")){var i=!0,e=function(t){C("#wpoptimize_table_list tbody").css("opacity","1")};C("#wpoptimize_table_list tbody").remove(),C("#wpoptimize_table_list thead").after(t.table_list),C("#wpoptimize_table_list").trigger("updateAll",[i,e])}t.hasOwnProperty("total_size")&&C("#optimize_current_db_size").html(t.total_size),t.hasOwnProperty("show_innodb_force_optimize")&&C(".innodb_force_optimize--container").toggleClass("hidden",!t.show_innodb_force_optimize),j(),v(F)}function b(t){var i=t.next(),e=i.next(),o=t.data("table"),n=t.data("type"),a={optimization_id:"optimizetables",optimization_table:o,optimization_table_type:n};t.hide(),F&&(a.optimization_force=!0),i.removeClass("visibility-hidden"),q("do_optimization",{optimization_id:"optimizetables",data:a},function(o){if(o.result.meta.tableinfo){var n=t.closest("tr"),a=o.result.meta,s=a.tableinfo;z(n,s),C("#wpoptimize_table_list > tbody:last th:eq(6)").html(['<span style="color:',a.overhead>0?"#0000FF":"#004600",'">',a.overhead_formatted,"</span>"].join(""))}t.prop("disabled",!1),i.addClass("visibility-hidden"),e.show().removeClass("visibility-hidden").delay(2500).fadeOut("fast",function(){t.show()})})}function z(t,i){C("td:eq(2)",t).text(i.rows),C("td:eq(3)",t).text(i.data_size),C("td:eq(4)",t).text(i.index_size),C("td:eq(5)",t).text(i.type),i.is_optimizable?C("td:eq(6)",t).html(['<span style="color:',i.overhead>0?"#0000FF":"#004600",'">',i.overhead,"</span>"].join("")):C("td:eq(6)",t).html('<span color="#0000FF">-</span>')}function v(t){C(".run-single-table-optimization").each(function(){var i=C(this);i.data("disabled")&&(t?i.prop("disabled",!1):i.prop("disabled",!0))})}function y(t){var i,e,o;if(t)for(i in t)t.hasOwnProperty(i)&&(e=["#wp-optimize-settings-",t[i].dom_id].join(""),o=t[i].info?t[i].info.join("<br>"):"",C(e+" .wp-optimize-settings-optimization-info").html(o))}function k(){var t=["",c().join("_")].join("");G.hasOwnProperty(t)?y(G[t]):q("get_optimizations_info",{"wpo-sites":c()},function(i){i&&(G[t]=i,y(i))})}function x(t){var i=C("#wpo_import_spinner"),e=C("#wpo_import_success_message"),o=C("#wpo_import_error_message");i.show(),q("import_settings",{settings:t},function(t){i.hide(),t&&t.errors&&t.errors.length?(o.text(t.errors.join("<br>")),o.slideDown()):t&&t.messages&&t.messages.length&&(e.text(t.messages.join("<br>")),e.slideDown(),setTimeout(function(){window.location.reload()},500)),C("#wpo_import_settings_btn").prop("disabled",!1)})}function O(t,i){var e=document.body.appendChild(document.createElement("a")),o=new Date,n=o.getFullYear(),a=o.getMonth()<10?["0",o.getMonth()].join(""):o.getMonth(),s=o.getDay()<10?["0",o.getDay()].join(""):o.getDay();i=i?i:["wpo-settings-",n,"-",a,"-",s,".json"].join(""),e.setAttribute("download",i),e.setAttribute("style","display:none;"),e.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(JSON.stringify(t))),e.click()}function P(t){var i=t.next(),e=i.next(),o=t.data("table"),n={optimization_id:"orphanedtables",optimization_table:o};i.removeClass("visibility-hidden"),q("do_optimization",{optimization_id:"orphanedtables",data:n},function(i){if(i.result.meta.success){var n=t.closest("tr");e.show().removeClass("visibility-hidden"),setTimeout(function(){n.fadeOut("slow",function(){n.remove(),j()})},500)}else{var a=wpoptimize.table_was_not_deleted.replace("%s",o);i.result.meta.message&&(a+="("+i.result.meta.message+")"),alert(a)}}).always(function(){t.prop("disabled",!1),i.addClass("visibility-hidden")})}function j(){var t=C("#wpoptimize_table_list"),i=!0;C("tr",t).each(function(){var t=C(this);if(C("button",t).length>0)return i=!1,!1}),C("tr",t).each(function(){var t=C(this);i?C("td:last, th:last",t).hide():C("td:last, th:last",t).show()})}var C=jQuery,W=0,D=new Updraft_Queue,q=wp_optimize.send_command,T=!1,F=!1;f(C("#select_all_optimizations"),C("#optimizations_list .optimization_checkbox")),t(),C("#enable-schedule").change(function(){t()}),C.tablesorter.addParser({id:"sizes",is:function(t){return!1},format:function(t,i,e){var o=C(e).data("raw_value");return o||(o=0),parseInt(o)},type:"numeric"}),C(document).on("wpo_database_tabs_loaded",function(){var t=C("#wpoptimize_table_list_filter"),i=C("#wpoptimize_table_list"),e=C("#wpoptimize_table_list tbody:last"),o=C("#wpoptimize_table_list_tables_not_found");i.tablesorter({theme:"default",widgets:["zebra","rows","filter"],cssInfoBlock:"tablesorter-no-sort",headers:{2:{sorter:"digit"},3:{sorter:"sizes"},4:{sorter:"sizes"},7:{sorter:!1}},widgetOptions:{filter_external:t,filter_defaultFilter:{2:"~{query}"}}}),i.on("filterEnd",function(){var n=C.trim(t.val());""==n?e.show():e.hide(),0==C("#the-list tr:visible",i).length?o.show():o.hide()});var n=C("#innodb_force_optimize"),a=n.closest("tr"),s=C("#innodb_force_optimize_single");n.on("change",function(){C('button, input[type="checkbox"]',a).each(function(){T=n.is(":checked");var t=C(this);t.data("disabled")&&(T?t.prop("disabled",!1):t.prop("disabled",!0))})}),s.on("change",function(){F=C(this).is(":checked"),v(F)}),F=s.is(":checked"),T=n.is(":checked"),v(F)}),C("#wp-optimize-disable-enable-trackbacks-enable").click(function(){e("trackbacks",!0)}),C("#wp-optimize-disable-enable-trackbacks-disable").click(function(){e("trackbacks",!1)}),C("#wp-optimize-disable-enable-comments-enable").click(function(){e("comments",!0)}),C("#wp-optimize-disable-enable-comments-disable").click(function(){e("comments",!1)}),C(".wpo-pages-menu").on("click","a",function(t){t.preventDefault(),C(this).is(".active")||(C(".wpo-pages-menu a.active").removeClass("active"),C(".wpo-page.active").removeClass("active"),C(this).addClass("active"),C('.wpo-page[data-whichpage="'+C(this).data("menuslug")+'"]').addClass("active"),window.scroll(0,0),C("#wp-optimize-wrap").trigger("page-change",{page:C(this).data("menuslug")})),C("#wp-optimize-nav-page-menu").trigger("click")}),C("#wp-optimize-wrap").on("page-change",function(t,i){"WP-Optimize"==i.page&&C("#wp-optimize-nav-tab-WP-Optimize-optimize").is(".nav-tab-active")&&C("#wp-optimize-nav-tab-WP-Optimize-optimize").trigger("click");var e=C(".wpo-page[data-whichpage="+i.page+"]").find(".nav-tab-wrapper .nav-tab-active");C("#wp-optimize-wrap").trigger("tab-change",{page:i.page,tab:e.data("tab")}),C("#wp-optimize-wrap").trigger("tab-change/"+i.page+"/"+e.data("tab"),{content:C("#"+e.attr("id")+"-contents")})}),setTimeout(function(){C("#wp-optimize-wrap").trigger("page-change",{page:C(".wpo-pages-menu a.active").data("menuslug")})},500),C(".nav-tab-wrapper .nav-tab").click(function(t){t.preventDefault();var i=C(this).attr("id"),e=C(this).closest(".nav-tab-wrapper");if(i){if(o(!1),C(this).is('[role="toggle-menu"]'))return void o(!0);e.find(".nav-tab:not(#wp-optimize-nav-tab-"+i+")").removeClass("nav-tab-active"),C(this).addClass("nav-tab-active"),C(this).closest(".wpo-page").find(".wp-optimize-nav-tab-contents").hide(),C("#"+i+"-contents").show(),C("#wp-optimize-wrap").trigger("tab-change",{page:C(this).data("page"),tab:C(this).data("tab")}),C("#wp-optimize-wrap").trigger("tab-change/"+C(this).data("page")+"/"+C(this).data("tab"),{content:C("#"+i+"-contents")})}}),C("#wp-optimize-nav-page-menu").on("click",function(t){t.preventDefault(),C(this).toggleClass("opened")});var A=!1;C("#wp-optimize-wrap").on("tab-change/WP-Optimize/tables",function(t){n()}),C("#wp-optimize-wrap").on("tab-change/WP-Optimize/optimize",function(t,i){n()}),C("#wp-optimize-wrap").on("tab-change/wpo_settings/settings",function(t,i){i.content.find(".innodb_force_optimize--container").length&&n()}),C("#wp-optimize-nav-tab-WP-Optimize-optimize-contents").on("click","button.wp-optimize-settings-optimization-run-button",function(){var t=C(this).closest(".wp-optimize-settings").data("optimization_id");return t?void(1!=C(".optimization_button_"+t).prop("disabled")&&(C(".optimization_button_"+t).prop("disabled",!0),l(function(){C(".optimization_button_"+t).prop("disabled",!1),r(t)}))):void console.log("Optimization ID corresponding to pressed button not found")}),C("#wp-optimize-nav-tab-WP-Optimize-optimize-contents").on("click","#wp-optimize",function(t){var i=C(this);t.preventDefault(),i.prop("disabled",!0),l(function(){i.prop("disabled",!1),_()})});var I=C("#wpo_settings_sites_list"),U=I.find("ul").first(),M=C('input[type="checkbox"]',U),Q=I.find("#wpo_all_sites"),$=C("#wpo_sitelist_show_moreoptions"),S=C("#wpo_sitelist_moreoptions"),E=C("#wpo_settings_sites_list_cron"),J=E.find("ul").first(),N=C('input[type="checkbox"]',J),R=E.find("#wpo_all_sites_cron"),Y=C("#wpo_sitelist_show_moreoptions_cron"),B=C("#wpo_sitelist_moreoptions_cron");m($,S,Q,M);var K=0;C([Q,M]).each(function(){C(this).on("change",function(){K++,setTimeout(function(){K--,0==K&&k()},1e3)})}),m(Y,B,R,N),C("#wp_optimize_table_list_refresh").click(function(t){t.preventDefault();var i=C(this).closest(".wpo-tab-postbox").find(".wpo_shade");i.removeClass("hidden"),C("#wpoptimize_table_list tbody").css("opacity","0.5"),q("get_table_list",!1,h).always(function(){i.addClass("hidden")})}),C("#database_settings_form, #settings_form").on("click",".wpo-save-settings",function(t){t.preventDefault();var e=C(this).closest("form"),o=e.find(".wpo-saving-settings");o.show();var n=a();q("save_settings",n,function(t){if(e.closest("form").find(".save-done").show().delay(5e3).fadeOut(),t&&t.hasOwnProperty("save_results")&&t.save_results&&t.save_results.hasOwnProperty("errors")){for(var o=0,n=t.save_results.errors.length;o<n;o++){var a='<div class="error">'+t.errors[o]+"</div>";i(a,"#wp-optimize-settings-save-results")}console.log(t.save_results.messages)}t&&t.hasOwnProperty("status_box_contents")&&C(t.status_box_contents).each(function(t,i){C(i).is("#wp_optimize_status_box")&&C("#wp_optimize_status_box").replaceWith(C(i))}),t&&t.hasOwnProperty("optimizations_table")&&C("#optimizations_list").replaceWith(t.optimizations_table),t.save_results.refresh&&location.reload()}).always(function(){o.hide()})}),C("#wp-optimize-wrap").on("click","#wp_optimize_status_box_refresh",function(t){t.preventDefault(),C("#wp_optimize_status_box").css("opacity","0.5"),q("get_status_box_contents",null,function(t){C("#wp_optimize_status_box").css("opacity","1"),C(t).each(function(t,i){C(i).is("#wp_optimize_status_box")&&C("#wp_optimize_status_box").replaceWith(C(i))})})});var G={};C("#wpo_import_settings_btn").on("click",function(t){var i=C("#wpo_import_settings_file"),e=i.val(),o=i[0].files[0],n=new FileReader;return C("#wpo_import_settings_btn").prop("disabled",!0),/\.json$/.test(e)?(n.onload=function(){x(this.result)},n.readAsText(o),!1):(t.preventDefault(),C("#wpo_import_settings_btn").prop("disabled",!1),C("#wpo_import_error_message").text(wpoptimize.please_select_settings_file).slideDown(),!1)}),C("#wpo_import_settings_file").on("change",function(){C("#wpo_import_error_message").slideUp()}),C("#wpo_export_settings_btn").on("click",function(t){return O(a("object")),!1});var H=function(t,i,e){return q("get_optimization_info",{optimization_id:i,data:e},function(e){var o=e&&e.result&&e.result.meta?e.result.meta:{},n=e&&e.result&&e.result.output?e.result.output.join("<br>"):"...";C(document).trigger(["optimization_get_info_",i].join(""),n),t.html(n),o.finished?C(document).trigger(["optimization_get_info_",i,"_done"].join(""),e):setTimeout(function(){H(t,i,o)},1)})};return C(document).ready(function(){C(".wp-optimize-optimization-info-ajax").each(function(){var t=C(this),i=t.parent(),e=t.data("id");C(document).trigger(["optimization_get_info_",e,"_start"].join("")),H(i,e,{support_ajax_get_info:!0})})}),C("#wpoptimize_table_list").on("click",".run-single-table-optimization",function(){var t=C("#enable-auto-backup-1"),i=C(this);t.is(":checked")?d(function(){b(i)}):b(i)}),C("#wpoptimize_table_list").on("click",".run-single-table-repair",function(){var t=C(this),i=t.next(),e=i.next(),o=t.data("table"),n={optimization_id:"repairtables",optimization_table:o};i.removeClass("visibility-hidden"),q("do_optimization",{optimization_id:"repairtables",data:n},function(n){if(n.result.meta.success){var a=t.closest("tr"),s=n.result.meta.tableinfo;t.prop("disabled",!1),i.addClass("visibility-hidden"),e.show().removeClass("visibility-hidden"),z(a,s),setTimeout(function(){var i=t.closest("td"),e=t.closest(".wpo_button_wrap");e.fadeOut("fast",function(){e.closest(".wpo_button_wrap").remove(),s.is_type_supported&&C(".wpo_button_wrap",i).removeClass("wpo_hidden")}),j()},1e3)}else t.prop("disabled",!1),i.addClass("visibility-hidden"),alert(wpoptimize.table_was_not_repaired.replace("%s",o))})}),C("#wpoptimize_table_list").on("click",".run-single-table-delete",function(){if(!confirm(wpoptimize.are_you_sure_you_want_to_remove_this_table))return!1;var t=C("#enable-auto-backup-1");t.is(":checked")?d(P(C(this))):P(C(this))}),j(),setTimeout(function(){q("check_overdue_crons",null,function(t){t&&t.hasOwnProperty("m")&&C("#wpo_settings_warnings").append(t.m)})},11e3),C(".wpo-introduction-notice .notice-dismiss, .wpo-introduction-notice .close").on("click",function(t){C(".wpo-introduction-notice").remove(),q("dismiss_install_or_update_notice",null,function(t){t&&t.hasOwnProperty("error")&&console.log("There was an error dismissing the install or update notice (dismiss_install_or_update_notice)",t)})}),{send_command:q,optimization_get_info:H,take_a_backup_with_updraftplus:d,save_auto_backup_options:u}};jQuery(document).ready(function(t){function i(i){var e=["#",i.data("additional")].join("");i.is(":checked")?t(e).show():t(e).hide()}function e(){var i=t("#wp-optimize-logger-settings .save_settings_reminder");i.is(":visible")||i.slideDown("normal")}function o(){t(".wpo_logger_type").each(function(){n(t(this))})}function n(i){var e,o,n=a();for(e in n)o=n[e],wpoptimize.loggers_classes_info[o].allow_multiple?t('option[value="'+o+'"]',i).show():t('option[value="'+o+'"]',i).hide()}function a(){var i=[];return t(".wpo_logging_row, .wpo_logger_type").each(function(){var e=t(this).is("select")?t(this).val():t(this).data("id");e&&i.push(e)}),i}function s(){var t,i=['<option value="">Select destination</option>'];for(t in wpoptimize.loggers_classes_info)wpoptimize.loggers_classes_info.hasOwnProperty(t)&&wpoptimize.loggers_classes_info[t].available&&i.push(['<option value="',t,'">',wpoptimize.loggers_classes_info[t].description,"</option>"].join(""));return['<div class="wpo_add_logger_form">','<select class="wpo_logger_type" name="wpo-logger-type[]">',i.join(""),"<select>",'<a href="#" class="wpo_delete_logger dashicons dashicons-no-alt"></a>','<div class="wpo_additional_logger_options"></div>',"</div>"].join("")}function p(i){if(!wpoptimize.loggers_classes_info[i].options)return"";var e,o=wpoptimize.loggers_classes_info[i].options,n=[],a="",s="";for(e in o)o.hasOwnProperty(e)&&(t.isArray(o[e])?(a=t.trim(o[e][0]),s=t.trim(o[e][1])):(a=t.trim(o[e]),s=""),n.push(['<input class="wpo_logger_addition_option" type="text" name="wpo-logger-options[',e,'][]" value="" ','placeholder="',a,'" ',""!==s?'data-validate="'+s+'"':"","/>"].join("")));return n.push('<input type="hidden" name="wpo-logger-options[active][]" value="1" />'),n.join("")}t(".wp-optimize-logging-settings").each(function(){var e=t(this);i(e),e.on("change",function(){i(e)})});var r=t("#wpo_add_logger_link");r.on("click",function(i){i.preventDefault(),t("#wp-optimize-logger-settings .save_settings_reminder").after(s()),n(t(".wpo_logger_type").first())}),t("#wp-optimize-general-settings").on("change",".wpo_logger_type",function(){var i=t(this),o=i.val(),n=i.parent().find(".wpo_additional_logger_options");n.html(p(o)),i.val()&&e()}),t(".wpo_logging_actions_row .dashicons-edit").on("click",function(){var i=t(this),e=i.closest(".wpo_logging_row");return t(".wpo_additional_logger_options",e).removeClass("wpo_hidden"),t(".wpo_logging_options_row",e).text(""),t(".wpo_logging_status_row",e).text(""),i.hide(),!1}),t("#wp-optimize-logger-settings").on("change",".wpo_logger_addition_option",function(){e()}),t(".wpo_logger_active_checkbox").on("change",function(){var i=t(this),e=i.closest("label").find('input[type="hidden"]');e.val(i.is(":checked")?"1":"0")}),t("#wp-optimize-general-settings").on("click",".wpo_delete_logger",function(){if(!confirm(wpoptimize.are_you_sure_you_want_to_remove_logging_destination))return!1;var i=t(this);return i.closest(".wpo_logging_row, .wpo_add_logger_form").remove(),o(),0==t("#wp-optimize-logging-options .wpo_logging_row").length&&t("#wp-optimize-logging-options").hide(),e(),!1});var l=!1;t(window).on("scroll",function(i){window.requestAnimationFrame(function(){var i=t(".wpo-main-header").length?t(".wpo-main-header")[0].offsetTop:0;window.pageYOffset>i-20!=l&&(l=!l,t("body").toggleClass("is-scrolled",l))})}),t(".wpo-info__trigger").on("click",function(i){i.preventDefault();var e=t(this).closest(".wpo-info");e.toggleClass("opened")}),t(".wpo-video-preview a").on("click",function(i){var e=t(this).data("embed");if(e){i.preventDefault();var o=t('<iframe width="356" height="200" allowfullscreen webkitallowfullscreen mozallowfullscreen>').attr("src",e);o.insertAfter(t(this)),t(this).remove(),o.focus()}})});
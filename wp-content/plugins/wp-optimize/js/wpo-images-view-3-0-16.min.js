WP_Optimize_Images_View=function(t){function e(t,e,a){var i,_,n,c=t,o=!1;if(e)for(i=w(y).index(w("#"+t)),_=w(y).index(w("#"+e)),-1==i&&(i=_),-1==_&&(_=i),i<_?(n=w(y).eq(i).closest(x),e=w(y).eq(_).attr("id")):(n=w(y).eq(_).closest(x),e=w(y).eq(i).attr("id"));!o;)a?(n.addClass("selected"),w(y,n).prop("checked",a)):(n.removeClass("selected"),w(y,n).prop("checked",a)),w(y,n).attr("id")==e&&(o=!0),n=n.next();else a?w("#"+c).closest(x).addClass("selected"):w("#"+c).closest(x).removeClass("selected");s(0==r().length)}function s(t){f.action_buttons&&w.each(f.action_buttons,function(e,s){s.prop("disabled",t)})}function a(){if(f.hide_when_empty){var t=w([".",f.image_container_class].join(""),k).length;w.each(f.hide_when_empty,function(e,s){t>0?s.show():s.hide()})}}function i(){h()&&(a(),s(0==r().length))}function _(){k.scrollTop()+k.height()+100>k[0].scrollHeight&&"function"==typeof f.load_next_page_callback&&f.load_next_page_callback()}function n(t,e,s,a,i,_){var n="image_"+(65536*(1+Math.random())|0).toString(16).substring(1);D.hasOwnProperty(t)||(D[t]=0),D[t]++,k.append(['\t\t\t<div class="',f.image_container_class," ",f.image_container_custom_classes," ",f.image_container_blog_class_prefix,t,'">\t\t\t\t<a class="button ',f.view_image_btn_link_class,'" href="',s,'" target="_blank">',f.view_image_btn_text,"</a>",'<div class="',f.row_id_class,'">\t\t\t\t\t<input id="',n,'" type="checkbox" class="',f.checkbox_class,'" value="',e,'">\t\t\t\t</div>\t\t\t\t<div class="',f.row_thumb_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',a,'" title="',i,'" alt="',i,'">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t\t<div class="',f.row_file_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">',_,'</a>\t\t\t\t</div>\t\t\t\t<div class="',f.row_action_class,'">\t\t\t\t\t<input type="button" value="',f.action_btn_text,'" class="',f.action_btn_class,'"/>\t\t\t\t</div>\t\t\t\t<label for="',n,'" class="',f.label_class,'">\t\t\t\t\t<div class="thumbnail">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',a,'" title="',i,'" alt="',i,'">\t\t\t\t\t</div>\t\t\t\t</label>\t\t\t</div>'].join(""))}function c(t){w(x,k).hide(),w([".",f.image_container_blog_class_prefix,t].join(""),k).show()}function o(t){return D.hasOwnProperty(t)?D[t]:0}function l(t){t!==v&&(v=t,t===A.GRID&&k.removeClass(f.list_mode_class),t===A.LIST&&k.addClass(f.list_mode_class))}function r(){var t=[];return 0==w('input[type="checkbox"]',k).length?t:(w("input:checked",k).each(function(){t.push(w(this).val())}),t)}function d(){k.show(),w(f.related_elements).each(function(){w(this).show()}),i(),_()}function u(){k.hide(),w(f.related_elements).each(function(){w(this).hide()})}function h(){return k.is(":visible")}function g(){w(".wpo_unused_image__input",k).prop("checked",!0).trigger("change")}function m(){w(".wpo_unused_image__input",k).prop("checked",!1).trigger("change")}function p(){w([".",f.image_container_class].join(""),k).remove(),D={},s(!0)}var w=jQuery,b={container:"",image_container_class:"wpo_unused_image",image_container_custom_classes:"wpo_unused_image_row",image_container_blog_class_prefix:"wpo_unused_image_site_",view_image_btn_link_class:"wpo_unused_image_view_link",view_image_btn_text:wpoptimize.view_image_link_text,row_selector:".wpo_unused_image_row",row_id_class:"wpo_unused_images_row_id",row_thumb_class:"wpo_unused_images_row_thumb",row_file_class:"wpo_unused_images_row_file",row_action_class:"wpo_unused_images_row_action",label_class:"wpo_unused_image_thumb_label",action_btn_text:"Remove",action_btn_class:"button button-primary wpo_unused_images_remove_single",checkbox_class:"wpo_unused_image__input",list_mode_class:"wpo_unused_image_list_view",related_elements:[],action_buttons:[],hide_when_empty:[],load_next_page_callback:null},f=jQuery.extend({},b,t),A={GRID:"grid",LIST:"list"},v=A.GRID,k=f.container,x="."+f.image_container_class,y="."+f.checkbox_class,C="",D={};k.on("scroll",function(){_()});var Q=!1;return k.on("mousedown",f.row_selector,function(t){Q=t.shiftKey||t.ctrlKey}),k.on("mouseup",f.row_selector,function(t){Q=t.shiftKey||t.ctrlKey}),k.on("change","."+f.checkbox_class,function(t){!0===w(this).prop("checked")?w(this).closest(x).addClass("selected"):w(this).closest(x).removeClass("selected");var s=w(this).attr("id");""==C||0==w("#"+C).length||0==Q?e(s,null,!0===w(this).prop("checked")):Q?(e(C,s,!0===w(this).prop("checked")),C=""):e(s,null,!0===w(this).prop("checked")),C=s}),{show:d,hide:u,clear:p,append_image:n,get_selected_images:r,get_images_count:o,load_next_page_if_need:_,filter_by_site:c,switch_view_mode:l,select_all:g,select_none:m,is_visible:h,update_view:i}};
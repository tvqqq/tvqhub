!function(e){var i=window.wp_optimize||{},t=i.send_command,n=wpoptimize.refresh_frequency||6e3;if(!t)return void console.error("WP-Optimize Minify: wp_optimize.send_command is required.");var s={};s.init=function(){var i=this;return this.enabled=!1,e(document).on("wp-optimize/minify/toggle-status",function(t,n){n.hasOwnProperty("enabled")&&(e('[data-whichpage="wpo_minify"]').toggleClass("is-enabled",n.enabled),i.enabled=n.enabled,i.enabled&&i.getFiles())}),e(".purge_minify_cache").click(function(){e.blockUI(),t("purge_minify_cache",null,function(e){console.log(e)}).always(function(){e.unblockUI()})}),e(".purge_all_minify_cache").click(function(){e.blockUI(),t("purge_all_minify_cache",null,function(e){console.log(e)}).always(function(){e.unblockUI()})}),e(".minify_increment_cache").click(function(){e.blockUI(),t("minify_increment_cache",null,function(e){console.log(e)}).always(function(){e.unblockUI()})}),e("input[type=checkbox].wpo-save-setting").on("change",function(i){var n=e(this),s=n.prop("checked"),o=n.prop("name"),c={};c[o]=s,e.blockUI(),t("save_minify_settings",c,function(e){e.success?n.trigger("wp-optimize/minify/saved_setting"):console.log("Settings not saved",c)}).always(function(){e.unblockUI()})}),e("#wpo_min_enable_minify").on("wp-optimize/minify/saved_setting",function(){this.enabled=e(this).prop("checked"),e(document).trigger("wp-optimize/minify/toggle-status",{enabled:this.enabled})}),e("#wpo_min_enable_minify, #wpo_min_enable_minify_css, #wpo_min_enable_minify_js, #wpo_min_enable_minify_html").on("wp-optimize/minify/saved_setting",function(){e(this).closest(".wpo_section").toggleClass("wpo-feature-is-disabled",!e(this).is(":checked"))}),e("#wpo_min_enable_minify_debug").on("wp-optimize/minify/saved_setting",function(){e.blockUI({message:"<h1>"+wpoptimize.page_refresh+"</h1>"}),location.href=e("#wp-optimize-nav-tab-wpo_minify-advanced").prop("href")}),e("#wpo_min_edit_default_exclutions").on("wp-optimize/minify/saved_setting",function(){e(".wpo-minify-default-exclusions").toggleClass("hidden",!e(this).prop("checked"))}),e(".wp-optimize-save-minify-settings").click(function(i){i.preventDefault();var n=e(this),s=n.closest("form"),o=n.next(),c=o.next();o.show(),e.blockUI();var l=e(s).serializeArray().reduce(function(e,i){return e[i.name]=i.value,e},{});e(s).find('input[type="checkbox"]').each(function(i){var t=e(this).attr("name");l[t]=e(this).is(":checked")?"true":"false"}),t("save_minify_settings",l,function(i){i.hasOwnProperty("error")?(console.log(i.error),e(".wpo-error__enabling-cache").removeClass("wpo_hidden").find("p").text(i.error.message)):e(".wpo-error__enabling-cache").addClass("wpo_hidden").find("p").text(""),o.hide(),c.show(),setTimeout(function(){c.fadeOut("slow",function(){c.hide()})},5e3)}).always(function(){e.unblockUI()})}),e(".wp-optimize-minify-status-information-notice").on("click",".notice-dismiss",function(e){e.preventDefault(),t("hide_minify_notice")}),e("#wpo_min_jsprocessed, #wpo_min_cssprocessed").on("click",".log",function(i){i.preventDefault(),e(this).nextAll(".wpo_min_log").slideToggle("fast")}),this.enabled=e("#wpo_min_enable_minify").prop("checked"),e(document).trigger("wp-optimize/minify/toggle-status",{enabled:this.enabled}),this},s.getFiles=function(){if(this.enabled){var i={stamp:(new Date).getTime()};t("get_minify_cached_files",i,function(i){i.cachesize.length>0&&(e("#wpo_min_cache_size").html(i.cachesize),e("#wpo_min_cache_time").html(i.cacheTime),e("#wpo_min_cache_path").html(i.cachePath));var t=[];i.js.length>0&&e(i.js).each(function(){t.push(this.uid),0==e("#"+this.uid).length&&e("#wpo_min_jsprocessed ul.processed").append('\t\t\t\t\t\t<li id="'+this.uid+'">\t\t\t\t\t\t\t<span class="filename">'+this.filename+" ("+this.fsize+')</span>\t\t\t\t\t\t\t<a href="#" class="log">'+wpoptimize.toggle_info+'</a>\t\t\t\t\t\t\t<div class="hidden wpo_min_log">'+this.log+"</div>\t\t\t\t\t\t</li>\t\t\t\t\t")}),e("#wpo_min_jsprocessed ul.processed .no-files-yet").toggle(!i.js.length),i.css.length>0&&e(i.css).each(function(){t.push(this.uid),0==e("#"+this.uid).length&&e("#wpo_min_cssprocessed ul.processed").append('\t\t\t\t\t\t<li id="'+this.uid+'">\t\t\t\t\t\t\t<span class="filename">'+this.filename+" ("+this.fsize+')</span>\t\t\t\t\t\t\t<a href="#" class="log">'+wpoptimize.toggle_info+'</a>\t\t\t\t\t\t\t<div class="hidden wpo_min_log">'+this.log+"</div>\t\t\t\t\t\t</li>\t\t\t\t\t")}),e("#wpo_min_cssprocessed ul.processed .no-files-yet").toggle(!i.css.length),e("#wpo_min_jsprocessed ul.processed > li, #wpo_min_cssprocessed ul.processed > li").each(function(){-1==jQuery.inArray(e(this).attr("id"),t)&&(e(this).is(".no-files-yet")||e(this).remove())})}),n&&setTimeout(s.getFiles.bind(this),n)}},i.minify=s}(jQuery);
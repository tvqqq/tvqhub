WP_Optimize_Images_View=function(t){function e(t,e,i){var a,n,o,_=t,c=!1;if(e)for(a=f(C).index(f("#"+t)),n=f(C).index(f("#"+e)),-1==a&&(a=n),-1==n&&(n=a),a<n?(o=f(C).eq(a).closest(x),e=f(C).eq(n).attr("id")):(o=f(C).eq(n).closest(x),e=f(C).eq(a).attr("id"));!c;)i?(o.addClass("selected"),f(C,o).prop("checked",i)):(o.removeClass("selected"),f(C,o).prop("checked",i)),f(C,o).attr("id")==e&&(c=!0),o=o.next();else i?f("#"+_).closest(x).addClass("selected"):f("#"+_).closest(x).removeClass("selected");s(0==r().length)}function s(t){v.action_buttons&&f.each(v.action_buttons,function(e,s){s.prop("disabled",t)})}function i(){if(v.hide_when_empty){var t=f([".",v.image_container_class].join(""),y).length;0===t?0==f(".wpo-images-view-empty",y).length&&y.html(f('<div class="wpo-images-view-empty wpo-fieldgroup" />').text(v.no_images_found_message)):f(".wpo-images-view-empty",y).remove(),f.each(v.hide_when_empty,function(e,s){t>0?s.show():s.hide()})}}function a(){m()&&(i(),s(0==r().length))}function n(){y.scrollTop()+y.height()+100>y[0].scrollHeight&&"function"==typeof v.load_next_page_callback&&v.load_next_page_callback()}function o(t,e,s,i,a,n){var o,_="image_"+(65536*(1+Math.random())|0).toString(16).substring(1),c="";if(v.row_action_buttons)for(o in v.row_action_buttons)v.row_action_buttons.hasOwnProperty(o)&&(c+=['<button href="javascript: ;" class="',v.row_action_buttons[o]["class"]?v.row_action_buttons[o]["class"]:"",'"',' title="',v.row_action_buttons[o].hint?v.row_action_buttons[o].hint:"",'">',v.row_action_buttons[o].title?v.row_action_buttons[o].title:"","</button>"].join(""));j.hasOwnProperty(t)||(j[t]=0),j[t]++,y.append(['\t\t\t<div class="',v.image_container_class," ",v.image_container_custom_classes," ",v.image_container_blog_class_prefix,t,'">\t\t\t\t<a class="button ',v.view_image_btn_link_class,'" href="',s,'" target="_blank">',v.view_image_btn_text,"</a>",'<div class="',v.row_id_class,'">\t\t\t\t\t<input id="',_,'" type="checkbox" class="',v.checkbox_class,'" value="',e,'">\t\t\t\t</div>\t\t\t\t<div class="',v.row_thumb_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',i,'" title="',a,'" alt="',a,'">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t\t<div class="',v.row_file_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">',n,'</a>\t\t\t\t</div>\t\t\t\t<div class="',v.row_action_class,'">',c,'</div>\t\t\t\t<label for="',_,'" class="',v.label_class,'">\t\t\t\t\t<div class="thumbnail">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',i,'" title="',a,'" alt="',a,'">\t\t\t\t\t</div>\t\t\t\t</label>\t\t\t</div>'].join(""))}function _(t){f(x,y).hide(),f([".",v.image_container_blog_class_prefix,t].join(""),y).show()}function c(t){return j.hasOwnProperty(t)?j[t]:0}function l(t){t!==k&&(k=t,t===A.GRID&&y.removeClass(v.list_mode_class),t===A.LIST&&y.addClass(v.list_mode_class))}function r(){var t=[];return 0==f('input[type="checkbox"]',y).length?t:(f("input:checked",y).each(function(){t.push(f(this).val())}),t)}function u(){y.show(),f(v.related_elements).each(function(){f(this).show()}),a(),n()}function d(){y.hide(),f(v.related_elements).each(function(){f(this).hide()})}function m(){return y.is(":visible")}function g(){f(".wpo_unused_image__input",y).prop("checked",!0).trigger("change")}function h(){f(".wpo_unused_image__input",y).prop("checked",!1).trigger("change")}function w(){f([".",v.image_container_class].join(""),y).remove(),j={},s(!0),"function"==typeof v.onclear&&v.onclear()}function p(){w(),n()}var f=jQuery,b={container:"",image_container_class:"wpo_unused_image",image_container_custom_classes:"wpo_unused_image_row",image_container_blog_class_prefix:"wpo_unused_image_site_",view_image_btn_link_class:"wpo_unused_image_view_link",view_image_btn_text:wpoptimize.view_image_link_text,row_selector:".wpo_unused_image_row",row_id_class:"wpo_unused_images_row_id",row_thumb_class:"wpo_unused_images_row_thumb",row_file_class:"wpo_unused_images_row_file",row_action_class:"wpo_unused_images_row_action",row_action_buttons:[],label_class:"wpo_unused_image_thumb_label",action_btn_text:"Remove",action_btn_class:"button button-primary wpo_unused_images_remove_single",checkbox_class:"wpo_unused_image__input",list_mode_class:"wpo_unused_image_list_view",no_images_found_message:"No images found",related_elements:[],action_buttons:[],hide_when_empty:[],load_next_page_callback:null,onclear:null},v=jQuery.extend({},b,t),A={GRID:"grid",LIST:"list"},k=A.GRID,y=v.container,x="."+v.image_container_class,C="."+v.checkbox_class,D="",j={};y.on("scroll mousewheel",function(){n()});var P=!1;return y.on("mousedown",v.row_selector,function(t){P=t.shiftKey||t.ctrlKey}),y.on("mouseup",v.row_selector,function(t){P=t.shiftKey||t.ctrlKey}),y.on("change","."+v.checkbox_class,function(t){!0===f(this).prop("checked")?f(this).closest(x).addClass("selected"):f(this).closest(x).removeClass("selected");var s=f(this).attr("id");""==D||0==f("#"+D).length||0==P?e(s,null,!0===f(this).prop("checked")):P?(e(D,s,!0===f(this).prop("checked")),D=""):e(s,null,!0===f(this).prop("checked")),D=s}),{show:u,hide:d,clear:w,reload:p,append_image:o,get_selected_images:r,get_images_count:c,load_next_page_if_need:n,filter_by_site:_,switch_view_mode:l,select_all:g,select_none:h,is_visible:m,update_view:a}};